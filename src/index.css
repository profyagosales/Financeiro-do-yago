/* === Fontes variáveis locais (sem Google) === */
@import "@fontsource-variable/inter";
@import "@fontsource-variable/sora";

/* Tailwind */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens */
:root {
  /* Colors */
  --color-primary: #009579;
  --color-secondary: #1e88e5;
  --color-neutral: #64748b;
  --color-success: #22c55e;
  --color-warning: #f6be23;
  --color-error: #ff4f5a;
  --color-surface: #ffffff;

  /* Typography */
  --font-sans:
    "Inter Variable", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
    Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  --font-display: "Sora Variable", var(--font-sans);

  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;

  /* Borders */
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 1rem;
  --radius-card: 1.75rem;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-card: 0 8px 20px rgba(0, 0, 0, 0.08);
  /* Header gradient opacity */
  --header-alpha: 1;
}

/* Preferência de tema */
:root {
  color-scheme: light;
}
.dark {
  color-scheme: dark;
  --color-surface: #1e293b;
}

/* Tokens (mantém compatível com shadcn) */
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 47.4% 11.2%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 47.4% 11.2%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 47.4% 11.2%;
    --primary: 183 80% 28%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 1rem;

    --chart-1: 172 67% 45%;
    --chart-2: 223 76% 63%;
    --chart-3: 43 95% 62%;
    --chart-4: 12 90% 60%;
    --chart-5: 338 78% 62%;
    /* Named chart tokens */
    --chart-blue: 217 91% 60%; /* ~blue-500 */
    --chart-emerald: 160 84% 39%; /* ~emerald-500 */
    --chart-rose: 346 77% 57%; /* ~rose-500 */
    --chart-violet: 251 89% 68%; /* ~violet-500 */
    --chart-amber: 38 92% 58%; /* ~amber-500 */
    /* Axes & grid */
    --chart-grid: 215 20% 88%;
    --chart-grid-strong: 215 16% 80%;
    --chart-axis: 215 16% 47%;
    /* Tooltip */
    --chart-tooltip-bg: 0 0% 100%;
    --chart-tooltip-fg: 222.2 47.4% 11.2%;

    --font-sans:
      "Inter Variable", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
      Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol";
    --font-display: "Sora Variable", var(--font-sans);
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 6%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 6%;
    --popover-foreground: 210 40% 98%;
    --primary: 173 80% 41%;
    --primary-foreground: 222.2 84% 4.9%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 22%;
    --input: 217.2 32.6% 22%;
    --ring: 173 80% 41%;
    /* Charts (dark) */
    --chart-grid: 217 19% 24%;
    --chart-grid-strong: 217 19% 28%;
    --chart-axis: 215 15% 65%;
    --chart-tooltip-bg: 222.2 84% 8%;
    --chart-tooltip-fg: 210 40% 98%;
  }

  * {
    @apply border-border;
  }
  html,
  body,
  #root {
    height: 100%;
  }
  html {
    font-family: var(--font-sans);
  }
  body {
    @apply bg-background text-foreground antialiased font-sans;
  }
  h1,
  h2,
  h3 {
    font-family: var(--font-display);
    letter-spacing: -0.02em;
  }
  *:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
    box-shadow: 0 0 0 2px hsl(var(--ring) / 0.4);
  }
}

/* ==== Background artístico (sempre ATRÁS do conteúdo) ==== */
body::before,
body::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1; /* <- garante que não cobre o app */
  pointer-events: none; /* <- nunca intercepta cliques */
}

/* Canvas base (sem grid; visual limpo) */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  /* removemos o grid para um fundo mais clean */
  background: transparent;
  opacity: 0;
}
.dark body::before {
  background: transparent;
  opacity: 0;
}

/* Gradientes radiais nas bordas */
body::after {
  background:
    radial-gradient(
      800px 400px at -10% -10%,
      hsla(var(--primary), 0.18),
      transparent 60%
    ),
    radial-gradient(
      900px 500px at 110% -10%,
      hsla(220, 90%, 60%, 0.12),
      transparent 60%
    ),
    radial-gradient(
      700px 400px at 50% 120%,
      hsla(280, 70%, 60%, 0.1),
      transparent 60%
    );
  filter: saturate(1.1);
}

/* Cards “glass” utilitário opcional */
@layer utilities {
  .sidebar-header {
    @apply bg-gradient-to-tr from-emerald-600 to-emerald-400 text-white;
  }
  .glass {
    @apply bg-white/70 backdrop-blur-md border border-white/40 shadow-sm;
  }
  .dark .glass {
    @apply bg-white/5 border-white/10;
  }
  /* Cards e KPIs padronizados */
  .card-surface {
    @apply rounded-2xl bg-white/70 backdrop-blur-xl border border-white/40 shadow-sm;
  }
  .dark .card-surface {
    @apply bg-white/5 border-white/10;
  }
  .kpi {
    @apply card-surface p-5 sm:p-6 flex items-start gap-4;
  }
  .kpi-icon {
    @apply size-10 rounded-xl flex items-center justify-center text-white shadow-md;
    background: linear-gradient(
      135deg,
      hsl(var(--primary) / 0.95),
      hsl(var(--primary) / 0.7)
    );
  }
  .kpi-title {
    @apply text-sm text-muted-foreground;
  }
  .kpi-value {
    @apply text-2xl sm:text-3xl font-semibold tracking-tight;
  }
  .glass-card {
    @apply bg-white/60 dark:bg-gray-900/40 backdrop-blur-xl border border-white/20 dark:border-white/10 shadow-[0_8px_30px_rgb(0,0,0,0.12)];
  }
}

/* Ajuste fino para sidebar */
:root {
  --sidebar-border: 1px;
}

/* === Charts (Recharts) theming — usa tokens acima === */
.recharts-cartesian-grid line {
  stroke: hsl(var(--chart-grid));
}
.recharts-xAxis .recharts-cartesian-axis-line,
.recharts-yAxis .recharts-cartesian-axis-line {
  stroke: transparent;
}
.recharts-cartesian-axis-tick-line {
  stroke: transparent;
}
.recharts-tooltip-wrapper .recharts-default-tooltip {
  border-radius: 12px !important;
  border: 1px solid hsl(var(--border)) !important;
  background: hsl(var(--chart-tooltip-bg)) !important;
  color: hsl(var(--chart-tooltip-fg)) !important;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08) !important;
}
